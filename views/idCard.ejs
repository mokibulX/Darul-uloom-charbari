<%- include('header') %>
<style>
  body {
    background: #eceff1;
    font-family: 'Poppins', sans-serif;
  }

  .id-card {
    width: 3.5in;
    height: 2.25in;
    background: #fff;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    border: 2px solid #0b6b77;
    position: relative;
  }

  /* Top Bar */
  .id-top {
    height: 55px;
    background: linear-gradient(135deg, #004d61, #009688);
    position: relative;
    display: flex;
    align-items: center;
    padding: 0 12px;
    color: #fff;
  }
  .id-top h3 {
    font-size: 15px;
    font-weight: 700;
    margin: 0;
  }
.id-logo {
  position: absolute;
  top: 5px;
  right: 12px;
  width: 16%;   /* card width-এর 15% */
  height: auto;
  border-radius: 50%;
  object-fit: cover;
}



  /* Body */
  .id-body {
    display: flex;
    padding: 8px 10px;
  }
  .id-photo-wrapper {
    flex: 0 0 90px;
    position: relative;
  }
  .id-photo {
    width: 80px;
    height: 95px;
    border-radius: 8px;
    border: 2px solid #0b6b77;
    object-fit: cover;
  }
  .id-seal {
    position: absolute;
    bottom: -8px;
    right: -12px;
    width: 55px;
    opacity: 0.7;
  }

  /* Details */
  .id-details {
    flex: 1;
    margin-left: 9px;
    display: grid;
    grid-template-columns: auto auto;
    gap: 2px 5px;
    align-items: start;
  }
  .id-details p {
    margin: 0;
    font-size: 10px;
    font-weight: 500;
    line-height: 1;
    color: #002f34;
    white-space: nowrap;
  }
  .id-details p span {
    font-weight: 700;
    color: #000;
    min-width: 35px;
    display: inline-block;
  }

  /* Footer */
  .id-footer {
    height: 45px;
    background: linear-gradient(135deg, #006064, #004d40);
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    color: #fff;
    font-size: 10px;
    font-weight: 600;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  /* Signature */
  .signature {
    position: absolute;
    bottom: 14px;
    right: 20px;
    width: 75px;
    opacity: 0.85;
  }

  /* Download Button */
  .download-btn {
    margin-top: 18px;
  }
</style>

<body>
  <div class="d-flex flex-column justify-content-center align-items-center vh-100">

    <!-- ID Card -->
    <div id="idCard" class="id-card">
      <!-- Top -->
      <div class="id-top">
        <h3>Darul Uloom Charbari(Gazarikandi)</h3><br>
        <img src="/images/logo.png" class="id-logo" alt="Logo" width="100" height="100">
        
      </div>

      <!-- Body -->
      <div class="id-body">
        <div class="id-photo-wrapper">
          <img src="<%= user.image %>" class="id-photo" alt="Photo">
          <img src="/images/seal.png" class="id-seal" alt="Seal">
        </div>
        <div class="id-details">
          <p><span>Name:</span> <%= user.name %></p>
          <p><span>Father:</span> <%= user.sonOf %></p>
          <p><span>Class:</span> <%= user.class %></p>
          <p><span>DOB:</span> <%= user.dateOfbrith %></p>
          <p><span>Vill:</span> <%= user.vill %></p>
          <p><span>PO:</span> <%= user.post %></p>
          <p><span>Dist:</span> <%= user.distric %></p>
          <p><span>State:</span> <%= user.state %></p>
        </div>
      </div>

      <!-- Footer -->
      <div class="id-footer">
        <div>ID No: <%= user.idno %></div>
        <div>Issue: <%= new Date().toLocaleDateString() %> | Exp: <%= new Date(new Date().setFullYear(new Date().getFullYear() + 1)).toLocaleDateString() %></div>
      </div>

      <!-- Signature -->
      <img src="/images/sign.png" class="signature" alt="Signature">
    </div>

    <!-- Download Button -->
    <div class="download-btn">
      <button class="btn btn-success btn-sm" onclick="downloadID()">⬇️ Download Premium ID</button>
    </div>
  </div>

  <%- include('footer') %>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    function downloadID() {
      const card = document.getElementById("idCard");
      html2canvas(card, { scale: 4, backgroundColor: "#fff" }).then(canvas => {
        const link = document.createElement("a");
        link.download = "id-card-premium.png";
        link.href = canvas.toDataURL("image/png");
        link.click();
      });
    }
  </script>
</body>
</html>
